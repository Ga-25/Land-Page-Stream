<!DOCTYPE html>
<html lang="pt-BR">
<head>

   <meta name="facebook-domain-verification" content="j7m8yhp3mxy1suwhcwfmqva53i5lnh" />

<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1109960830695523');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1109960830695523&ev=PageView&noscript=1"
/></noscript>
<!-- End Meta Pixel Code -->

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastro Confirmado - StreamForce</title>
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#0f1115;
      --panel:#171a21;
      --soft:#232838;
      --txt:#e7e9ee;
      --muted:#a9b0c0;
      --primary:#3b82f6;
      --success:#22c55e;
    }
    *{box-sizing:border-box}
    body{
      margin:0;background:var(--bg);color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;
      min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;
      overflow-x:hidden;
    }
    .container{
      position:relative;
      width:100%;max-width:860px;background:linear-gradient(180deg, rgba(255,255,255,.04), transparent 20%), var(--panel);
      border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:28px;
      box-shadow:0 15px 40px rgba(0,0,0,.35);
    }
    .success-header{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px}
    .status-badge{
      background:rgba(34,197,94,.15);color:#86efac;border:1px solid rgba(34,197,94,.4);
      padding:6px 10px;border-radius:999px;font-weight:800;font-size:.8rem;letter-spacing:.4px
    }
    .completion-text{color:var(--muted)}
    .progress-container{margin:12px 0 18px 0}
    .progress-label{display:flex;justify-content:space-between;color:var(--muted);margin-bottom:6px}
    .progress-bar{height:12px;background:#0f1320;border:1px solid rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
    .progress-fill{height:100%;width:100%;background:linear-gradient(90deg,#22c55e,#16a34a)}
    .main-message{text-align:center;margin:18px 0}
    .main-title{margin:0;font-size:1.8rem}
    .main-subtitle{margin:6px 0 0 0;color:var(--muted)}
    .access-timer{
      background:rgba(59,130,246,.12);border:1px solid rgba(59,130,246,.35);
      border-radius:16px;padding:16px;margin:18px 0;text-align:center
    }
    .countdown-display{display:flex;gap:12px;justify-content:center;align-items:baseline}
    .time-unit{min-width:110px;background:#0f1320;border:1px solid rgba(255,255,255,.08);padding:12px;border-radius:12px}
    .time-number{font-size:2rem;font-weight:800}
    .time-label{text-transform:uppercase;color:var(--muted);font-size:.8rem;letter-spacing:.4px}
    .instructions{margin:18px 0}
    .instructions-title{font-weight:800;margin-bottom:10px}
    .instruction-item{display:flex;gap:12px;align-items:flex-start;margin:10px 0}
    .instruction-number{background:#0f1320;border:1px solid rgba(255,255,255,.08);width:28px;height:28px;display:grid;place-items:center;border-radius:8px;color:#93c5fd;font-weight:800}
    .benefits-reminder{margin:18px 0}
    .benefits-title{font-weight:800;margin-bottom:10px}
    .benefits-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
    .benefit-item{background:#0f1320;border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px}
    .benefit-title{font-weight:800}
    .benefit-desc{color:var(--muted);font-size:.95rem}
    .support-section{margin:20px 0;text-align:center}
    .support-btn{
      display:inline-block;margin-top:8px;padding:12px 18px;border-radius:12px;
      text-decoration:none;color:white;background:linear-gradient(45deg,#3b82f6,#2563eb);font-weight:800
    }
    .footer{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;color:var(--muted);margin-top:8px}
    .security-badges{display:flex;gap:10px;flex-wrap:wrap}
    .badge{background:#0f1320;border:1px solid rgba(255,255,255,.08);padding:8px 10px;border-radius:999px}
    /* Confetti */
    .confetti{position:fixed;width:10px;height:10px;top:-12vh;border-radius:2px;opacity:.9;animation:fall 3s linear infinite;pointer-events:none}
    @keyframes fall{0%{transform:translateY(-100vh) rotate(0)}100%{transform:translateY(120vh) rotate(720deg);opacity:0}}
    /* Toasts */
    .toast{position:fixed;bottom:24px;right:24px;background:#0f1320;border:1px solid rgba(255,255,255,.1);color:white;padding:14px 18px;border-radius:12px;font-weight:700;box-shadow:0 10px 28px rgba(0,0,0,.35);z-index:9999;animation:in .25s ease both}
    @keyframes in{from{opacity:0;transform:translateX(18px)}to{opacity:1;transform:none}}
    @keyframes out{to{opacity:0;transform:translateX(18px)}}
    @media (max-width:640px){
      .benefits-grid{grid-template-columns:1fr}
      .time-unit{min-width:90px}
    }
  </style>
</head>
<body>

  <!-- Confetti Elements -->
  <div id="confetti-box">
    <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
    <div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div><div class="confetti"></div>
  </div>

  <div class="container">
    <div class="success-header">
      <div class="status-badge">CADASTRO ATIVO</div>
      <div class="completion-text">Assinatura conclu√≠da</div>
    </div>

    <div class="progress-container">
      <div class="progress-label"><span>Conclu√≠da</span><span>100%</span></div>
      <div class="progress-bar"><div class="progress-fill"></div></div>
    </div>

    <div class="main-message">
      <h1 class="main-title">Retorne ao WhatsApp,</h1>
      <p class="main-subtitle">tudo completo! Seus dados de acesso chegar√£o em instantes.</p>
    </div>

    <div class="access-timer">
      <div class="timer-title">üé¨ Seus dados de acesso ser√£o enviados em:</div>
      <div class="countdown-display">
        <div class="time-unit">
          <span class="time-number" id="minutes">05</span>
          <div class="time-label">MIN</div>
        </div>
        <div class="time-unit">
          <span class="time-number" id="seconds">00</span>
          <div class="time-label">SEG</div>
        </div>
      </div>
      <div class="timer-message">Fique atento ao seu WhatsApp!</div>
    </div>

    <div class="benefits-reminder">
      <div class="benefits-title">üéâ O que voc√™ ganhou:</div>
      <div class="benefits-grid">
        <div class="benefit-item"><div class="benefit-title">üì∫ 50.000+ Canais</div><div class="benefit-desc">TV ao vivo, esportes, filmes</div></div>
        <div class="benefit-item"><div class="benefit-title">üéØ Qualidade 4K</div><div class="benefit-desc">Ultra HD sem travamentos</div></div>
        <div class="benefit-item"><div class="benefit-title">üì± Multi Dispositivos</div><div class="benefit-desc">TV, celular, tablet, PC</div></div>
        <div class="benefit-item"><div class="benefit-title">üõ†Ô∏è Suporte 24/7</div><div class="benefit-desc">Ajuda sempre que precisar</div></div>
      </div>
    </div>

    <div class="support-section">
      <div class="support-title">üÜò N√£o recebeu em 10 minutos?</div>
      <div class="support-text">Nossa equipe est√° sempre pronta para ajudar! Entre em contato conosco imediatamente.</div>
      <a class="support-btn" target="_blank" href="https://wa.me/5577999779797?text=Ol%C3%A1!%20Finalizei%20meu%20cadastro%20na%20StreamForce%20mas%20ainda%20n%C3%A3o%20recebi%20os%20dados%20de%20acesso.%20Podem%20me%20ajudar%3F">üìû CONTATO EMERGENCIAL</a>
    </div>

    <div class="footer">
      <div class="footer-text">¬© 2024 StreamForce. Todos os direitos reservados.</div>
      <div class="security-badges">
        <div class="badge">üîí Dados Protegidos</div>
        <div class="badge">‚úÖ Acesso Garantido</div>
        <div class="badge">‚ö° Suporte 24/7</div>
      </div>
    </div>
  </div>

  <script>
    const CONFIG = {
    whatsappNumber: '5577999779797'
  };

  document.addEventListener('DOMContentLoaded', function() {
    // N√ÉO inicialize o Pixel aqui ‚Äî ele j√° foi iniciado no <head>.
    // Apenas chame os inits da p√°gina:
    initFinalPixelEvents();   // Dispara Purchase uma √∫nica vez
    initCountdown();
    initSuccessTracking();
    initAutoActions();
    addVisualEffects();
    initConfetti();
  });

    function initFinalPixelEvents(){
      if(typeof fbq==='undefined') return;
      fbq('track','Purchase',{
        content_name:'StreamForce Premium',
        content_category:'Subscription',
        content_ids:['streamforce-premium'],num_items:1
      });
      fbq('trackCustom','Registration_Success',{
        eventsource:'successpage',conversion_complete:true,timestamp:new Date().toISOString()
      });
      setTimeout(()=>{ fbq('trackCustom','SuccessPageEngagement',{timeonpage:30}); }, 30000);
    }

    function initCountdown(){
      const minutesEl=document.getElementById('minutes');
      const secondsEl=document.getElementById('seconds');
      if(!minutesEl||!secondsEl) return;
      let total=5*60;
      const t=setInterval(()=>{
        const m=Math.floor(total/60), s=total%60;
        minutesEl.textContent=String(m).padStart(2,'0');
        secondsEl.textContent=String(s).padStart(2,'0');
        if(total<=0){ clearInterval(t); showAccessReady(); }
        total--;
      },1000);
    }

    function showAccessReady(){
      const timerSection=document.querySelector('.access-timer');
      const timerTitle=timerSection.querySelector('.timer-title');
      const countdown=timerSection.querySelector('.countdown-display');
      const msg=timerSection.querySelector('.timer-message');
      timerTitle.innerHTML='‚úÖ Dados de acesso enviados!';
      countdown.innerHTML='<div>üì± Verifique seu WhatsApp agora mesmo!</div>';
      msg.innerHTML='Se n√£o recebeu, use o contato emergencial abaixo.';
      timerSection.style.background='rgba(34,197,94,.18)';
      timerSection.style.borderColor='rgba(34,197,94,.5)';
      timerSection.style.transform='scale(1.02)';
      setTimeout(()=>{ timerSection.style.transform=''; }, 280);
      if(typeof fbq!=='undefined'){ fbq('trackCustom','AccessTimerComplete'); }
    }

    function initSuccessTracking(){
      let time=0;
      const it=setInterval(()=>{
        time+=10;
        if(time===60 && typeof fbq!=='undefined') fbq('trackCustom','SuccessPage1min');
        if(time===120 && typeof fbq!=='undefined') fbq('trackCustom','SuccessPage2min');
      },10000);

      let scrolled=false;
      window.addEventListener('scroll',()=>{
        if(!scrolled){ scrolled=true; if(typeof fbq!=='undefined') fbq('trackCustom','SuccessPageScroll'); }
      });

      document.querySelectorAll('a').forEach(a=>{
        a.addEventListener('click',e=>{
          if(typeof fbq!=='undefined'){
            fbq('trackCustom','SuccessPageLink_Click',{link_url:a.href,link_text:a.textContent.trim()});
          }
        });
      });

      window.addEventListener('beforeunload',()=>{ clearInterval(it); if(typeof fbq!=='undefined') fbq('trackCustom','SuccessPageExit'); });
    }

    function initAutoActions(){
      setTimeout(sendWhatsAppNotification, 10000);
      setTimeout(()=>{ if(confirm('P√°gina aberta h√° muito tempo. Deseja atualizar?')) location.reload(); }, 1800000);
      // Mobile tweaks
      if(window.innerWidth<=768){
        const vp=document.querySelector('meta[name="viewport"]');
        if(vp) vp.setAttribute('content','width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
        setTimeout(()=> toast('üí° Adicione esta p√°gina aos favoritos!', 'info'), 8000);
      }
      // Share button (se suportado)
      if(navigator.share){
        const btn=document.createElement('button');
        btn.textContent='üì§ Compartilhar Sucesso';
        Object.assign(btn.style,{position:'fixed',top:'16px',right:'16px',background:'linear-gradient(45deg,#22c55e,#16a34a)',color:'#fff',border:'none',padding:'10px 14px',borderRadius:'999px',fontWeight:'800',cursor:'pointer',zIndex:'1000',boxShadow:'0 8px 24px rgba(0,0,0,.25)'});
        btn.onclick=async()=>{
          try{
            await navigator.share({title:'StreamForce - Cadastro Ativado!',text:'Acabei de ativar minha assinatura StreamForce Premium! üéâ',url:location.href});
            if(typeof fbq!=='undefined') fbq('trackCustom','SuccessPageShared');
          }catch(e){ console.log('Share cancelado',e); }
        };
        document.body.appendChild(btn);
      }
      // Conectividade
      function checkConnection(){
        if(navigator.onLine) toast('‚úÖ Conex√£o est√°vel detectada','success');
        else toast('‚ö†Ô∏è Sem conex√£o. Verifique sua internet.','error');
      }
      setInterval(checkConnection, 30000);
      window.addEventListener('online', ()=>toast('‚úÖ Conex√£o restabelecida','success'));
      window.addEventListener('offline',()=>toast('‚ö†Ô∏è Sem conex√£o','error'));
      // Performance
      window.addEventListener('load',()=>{
        const ms = Math.round(performance.now());
        if(typeof fbq!=='undefined') fbq('trackCustom','SuccessPageLoad_Time',{loadtimems:ms});
        console.log(`üìä P√°gina carregada em ${ms}ms`);
      });
      // Easter egg (Konami)
      const seq=[38,38,40,40,37,39,37,39,66,65]; let typed=[];
      document.addEventListener('keydown',e=>{
        typed.push(e.keyCode); if(typed.length>seq.length) typed.shift();
        if(typed.length===seq.length && typed.every((v,i)=>v===seq[i])){
          document.body.style.animation='rainbow 2s infinite';
          toast('üéÆ Modo Especial Ativado!', 'success');
          if(typeof fbq!=='undefined') fbq('trackCustom','EasterEggActivated');
          setTimeout(()=>{ document.body.style.animation=''; }, 8000);
        }
      });
      const style=document.createElement('style');
      style.textContent='@keyframes rainbow{0%{filter:hue-rotate(0)}100%{filter:hue-rotate(360deg)}}';
      document.head.appendChild(style);
    }

    function sendWhatsAppNotification(){
      const message = `üéâ STREAMFORCE - CADASTRO FINALIZADO COM SUCESSO
‚úÖ Status: Cadastro ativado e confirmado
‚è∞ Data/Hora: ${new Date().toLocaleString('pt-BR')}
üì± Pr√≥ximo passo: Aguardar dados de acesso

üé¨ Informa√ß√µes importantes:
‚Ä¢ Seus dados de acesso ser√£o enviados em at√© 5 minutos
‚Ä¢ Voc√™ receber√° tutorial de instala√ß√£o completo
‚Ä¢ Suporte t√©cnico 24/7 dispon√≠vel
‚Ä¢ Qualidade 4K garantida

üöÄ Bem-vindo √† StreamForce Premium!`;
      const url = `https://wa.me/${CONFIG.whatsappNumber}?text=${encodeURIComponent(message)}`;
      console.log('WhatsApp URL (autom√°tica):', url);
      // Opcional: abrir automaticamente
      // window.open(url,'_blank');
    }

    function addVisualEffects(){
      // part√≠culas flutuantes
      const cont=document.querySelector('.container');
      setInterval(()=>{
        const p=document.createElement('div');
        p.style.cssText=`position:absolute;width:4px;height:4px;background:${['#FFD700','#22c55e','#3b82f6'][Math.floor(Math.random()*3)]};border-radius:50%;opacity:.7;left:${Math.random()*100}%;bottom:-10px;animation:floatUp 4s linear forwards;pointer-events:none`;
        cont.appendChild(p);
        setTimeout(()=>{ p.remove(); }, 4000);
      }, 2000);
      const st=document.createElement('style');
      st.textContent='@keyframes floatUp{0%{transform:translateY(0) rotate(0);opacity:.7}100%{transform:translateY(-100vh) rotate(360deg);opacity:0}}';
      document.head.appendChild(st);
      setTimeout(()=> toast('üéâ Bem-vindo √† StreamForce Premium!'), 2500);
      setTimeout(()=> toast('üì± Fique atento ao WhatsApp!', 'info'), 150000);
      document.addEventListener('visibilitychange',()=>{
        if(typeof fbq!=='undefined') fbq('trackCustom', document.hidden ? 'SuccessPageHidden' : 'SuccessPageVisible');
      });
    }

    function toast(message, type='success'){
      const t=document.createElement('div');
      t.className='toast';
      t.style.background = type==='success' ? '#0e4223' : (type==='info' ? '#111826' : '#7a0912');
      t.textContent=message;
      document.body.appendChild(t);
      setTimeout(()=>{ t.style.animation='out .25s ease forwards'; setTimeout(()=>t.remove(), 250); }, 3800);
    }

    function initConfetti(){
      const colors=['#FFD700','#22c55e','#3b82f6','#ff4500','#9C27B0'];
      document.querySelectorAll('.confetti').forEach((c,i)=>{
        c.style.left = `${(i*9)%100}%`;
        c.style.animationDelay = `${(i%5)*.25}s`;
        c.style.background = colors[i%colors.length];
      });
    }
     // üîë gerar um event_id √∫nico
  const eventId = 'purchase_' + Date.now() + '_' + Math.floor(Math.random() * 100000);

  // 1) Envia para o Pixel (browser)
  if (window.fbq) {
    fbq('track', 'Purchase', {
      currency: 'BRL',
      value: 0
    }, { eventID: eventId });
  }

  // 2) Envia para sua API (server ‚Üí CAPI)
  fetch("https://capi-api.onrender.com/event", {  // troque pela sua URL Render se diferente
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      event_name: "Purchase",
      event_id: eventId,
      event_source_url: window.location.href,
      user: {
        email: "cliente@exemplo.com",   // substituir por email real capturado do form
        phone: "+5511999999999"         // substituir por telefone real
      },
      custom_data: {
        currency: "BRL",
        value: 0
      }
    })
  }).then(r => r.json())
    .then(r => console.log("‚úÖ Evento enviado via API:", r))
    .catch(err => console.error("‚ùå Erro ao enviar via API:", err));
  </script>
</body>
</html>